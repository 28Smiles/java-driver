<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="High performance Java client for Apache Cassandra">
    <meta name="author" content="DataStax">

    <title>Java Driver for Apache Cassandra - Definition of mapped classes</title>

    <link rel="icon" href="../../../../favicon.ico">
    <link rel="apple-touch-icon" href="../../../../favicon.png">
    <link href="../../../../css/style.css" rel="stylesheet">
    <link href="../../../../css/pygments.css" rel="stylesheet">
    <link href="../../../../css/hotkeys.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="docs" data-spy="scroll" data-target=".side-nav">
    <header class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../../">Java Driver for Apache Cassandra</a>
        </div>
        <div class="collapse navbar-collapse" ng-controller="search">
          <ul class="nav navbar-nav">
            
            
            
            <li class="active">
              <a href="../../">Features</a>
            </li>
            
            
            <li>
              <a href="../../../changelog/">Changelog</a>
            </li>
            
            
            <li>
              <a href="../../../upgrade_guide/">Upgrading</a>
            </li>
            
            
            <li>
              <a href="../../../faq/">FAQ</a>
            </li>
            
          </ul>
          <form class="navbar-form form-search navbar-right dropdown visible-lg-block" ng-class="{open: hasResults}" role="search" ng-submit="submit()">
            <div class="form-group has-feedback">
              <input type="search" class="form-control input-sm mousetrap" placeholder="Search..." ng-model="q" ng-change="search('2.1.7')" ng-disabled="!searchReady" disabled data-hotkey="{down: moveDown, up: moveUp, esc: reset}" data-search>
            </div>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="result in results" ng-class="{'bg-warning': $index == current}"><a ng-href="{{basePath}}{{result.path}}"><span ng-bind-html="summary(result)"></span></a></li>
            </ul>
          </form>
        </div>
      </div>
    </header>

    <div class="container" id="content">
      <div class="row">
        <div class="col-md-9 content">
          <nav class="crumbs">
            <ol class="breadcrumb">
              
              <li>
                <div class="dropdown">
                  <button id="current-version" class="btn btn-default btn-sm" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    2.1.7
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="current-version">
                  
                    <li><a href="../../../../">2.2.0-rc1</a></li>
                  
                    <li class="disabled"><a href="./">2.1.7</a></li>
                  
                    <li><a href="../../../../2.1.6/">2.1.6</a></li>
                  
                    <li><a href="../../../../2.1.5/">2.1.5</a></li>
                  
                    <li><a href="../../../../2.0.10.1/">2.0.10.1</a></li>
                  
                    <li><a href="../../../../2.0.10/">2.0.10</a></li>
                  
                  </ul>
                </div>
              </li>
              
              
              
              
              <li><a href="../../../">Home</a></li>
              
              
              
              
              
              <li><a href="../../">Features</a></li>
              
              
              
              
              
              <li><a href="../">Object Mapper</a></li>
              
              
              
              
              
              <li class="active">Definition of mapped classes</li>
              
              
              
            </ol>
          </nav>
          

<h2 id="definition-of-mapped-classes">Definition of mapped classes<a class="anchor" href="#definition-of-mapped-classes" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>

<p>The object mapper is configured by annotations on the mapped classes.</p>

<h3 id="creating-a-table-entity">Creating a table entity<a class="anchor" href="#creating-a-table-entity" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h3>

<p>A table entity is a class that will be mapped to a table in Cassandra.
It is annotated with <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Table.html">@Table</a>:</p>
<pre><code>CREATE TABLE user (user_id uuid PRIMARY KEY, name text);
</code></pre>
<pre class="highlight"><code><span class="nd">@Table</span><span class="o">(</span><span class="n">keyspace</span> <span class="o">=</span> <span class="s">"ks"</span><span class="o">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"users"</span><span class="o">,</span>
       <span class="n">readConsistency</span> <span class="o">=</span> <span class="s">"QUORUM"</span><span class="o">,</span>
       <span class="n">writeConsistency</span> <span class="o">=</span> <span class="s">"QUORUM"</span><span class="o">,</span>
       <span class="n">caseSensitiveKeyspace</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span>
       <span class="n">caseSensitiveTable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@PartitionKey</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"user_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">UUID</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="c1">// ... constructors / getters / setters</span>
<span class="o">}</span>
</code></pre>
<p><code>@Table</code> takes the following options:</p>

<ul>
<li>
<code>keyspace</code>: the keyspace for the table.</li>
<li>
<code>name</code>: the name of the table in the database.</li>
<li>
<code>caseSensitiveKeyspace</code>: whether the keyspace name is <a href="http://docs.datastax.com/en/cql/3.2/cql/cql_reference/ucase-lcase_r.html">case-sensitive</a>.</li>
<li>
<code>caseSensitiveTable</code>: whether the table name is <a href="http://docs.datastax.com/en/cql/3.2/cql/cql_reference/ucase-lcase_r.html">case-sensitive</a>.</li>
<li>
<code>readConsistency</code>: the <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/core/ConsistencyLevel.html">consistency level</a> that will be used on each
get operation in the mapper. (if unspecified, it defaults to the
cluster-wide setting)</li>
<li>
<code>writeConsistency</code>: the <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/core/ConsistencyLevel.html">consistency level</a> that will be used on each
save, or delete operation in the mapper. (if unspecified, it defaults
to the cluster-wide setting)</li>
</ul>

<p>The class must provide a default constructor, and all fields (except the
ones annotated <code>@Transient</code>) must have corresponding setters and
getters.</p>

<h4 id="column-names">Column names<a class="anchor" href="#column-names" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h4>

<p>By default, the mapper tries to map each Java property to a
case insensitive column of the same name. If you want to use a different
name, or <a href="http://docs.datastax.com/en/cql/3.2/cql/cql_reference/ucase-lcase_r.html">case-sensitive</a> names, use the <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Column.html">@Column</a> annotation on
the field.</p>

<h4 id="primary-key-fields">Primary key fields<a class="anchor" href="#primary-key-fields" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h4>

<p><a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/PartitionKey.html">@PartitionKey</a> and <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/ClusteringColumn.html">@ClusteringColumn</a> are used to indicate the
<a href="http://thelastpickle.com/blog/2013/01/11/primary-keys-in-cql.html">partition key</a> and <a href="http://thelastpickle.com/blog/2013/01/11/primary-keys-in-cql.html">clustering columns</a>. In the case of a
composite partition key or multiple clustering columns, the integer
value indicates the position of the column in the key:</p>
<pre><code>CREATE TABLE sales(countryCode text, areaCode text, sales int,
                   PRIMARY KEY((countryCode, area Code)));
</code></pre>
<pre class="highlight"><code><span class="nd">@PartitionKey</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">countryCode</span><span class="o">;</span>
<span class="nd">@PartitionKey</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">String</span> <span class="n">areaCode</span><span class="o">;</span>
</code></pre>
<p>The order of the indices must match that of the columns in the table
declaration.</p>

<h4 id="enumerations">Enumerations<a class="anchor" href="#enumerations" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h4>

<p><a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Enumerated.html">@Enumerated</a> is used to map Java enumerations. Since Cassandra
does not support enumerations, the object mapper defines two ways to
persist an enum value :</p>

<ul>
<li>
<code>EnumType.ORDINAL</code> : the value is persisted as a Cassandra’s <code>int</code> and
its value is its position in the enum.</li>
<li>
<code>EnumType.STRING</code> : the value is persisted as a Cassandra’s <code>text</code> and
its value is its name in the enum.</li>
</ul>

<p>According to the chosen type, the matching database column must be the
same type.</p>
<pre><code>CREATE TABLE person (id uuid PRIMARY KEY, name text, gender int);
</code></pre>
<pre class="highlight"><code><span class="nd">@Enumerated</span><span class="o">(</span><span class="n">EnumType</span><span class="o">.</span><span class="na">ORDINAL</span><span class="o">)</span>
<span class="kd">private</span> <span class="n">Gender</span> <span class="n">gender</span><span class="o">;</span>
</code></pre>
<h4 id="computed-fields">Computed fields<a class="anchor" href="#computed-fields" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h4>

<p><a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Computed.html">@Computed</a> can be used on fields that are the result of a
computation on the Cassandra side. Typically a function call. Native
functions in Cassandra like <code>writetime()</code> or <a href="http://www.planetcassandra.org/blog/user-defined-functions-in-cassandra-3-0/">User Defined Functions</a> are
supported.</p>
<pre class="highlight"><code><span class="nd">@Computed</span><span class="o">(</span><span class="s">"ttl(name)"</span><span class="o">)</span>
<span class="n">Integer</span> <span class="n">ttl</span><span class="o">;</span>
</code></pre>
<p>The CQL return type of function must match the type of the field,
otherwise an exception will be thrown.</p>

<p>Computed fields are ignored when saving an entity.</p>

<p><code>@Computed</code> does not support case-sensitivity. If the expression
contains case-sensitive column or function names, you’ll have to escape
them:</p>
<pre class="highlight"><code><span class="nd">@Computed</span><span class="o">(</span><span class="s">"\"myFunction\"(\"myColumn\")"</span><span class="o">)</span>
<span class="kt">int</span> <span class="n">f</span><span class="o">;</span>
</code></pre>
<p>Finally, computed fields are only supported with <a href="../using/#basic-crud-operations">basic read
operations</a> at this time.
Support in <a href="../using/#accessors">accessors</a> in planned for a future
version (see
<a href="https://datastax-oss.atlassian.net/browse/JAVA-832">JAVA-832</a>).</p>

<h4 id="transient-fields">Transient fields<a class="anchor" href="#transient-fields" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h4>

<p><a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Transient.html">@Transient</a> can be used to prevent a field from being mapped.</p>

<h3 id="mapping-user-types">Mapping User Types<a class="anchor" href="#mapping-user-types" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h3>

<p><a href="http://docs.datastax.com/en/developer/java-driver/2.1/java-driver/reference/userDefinedTypes.html">User Defined Types</a> can also be mapped by using <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/UDT.html">@UDT</a>:</p>
<pre><code>CREATE TYPE address (street text, zip_code int);
</code></pre>
<pre class="highlight"><code><span class="nd">@UDT</span><span class="o">(</span><span class="n">keyspace</span> <span class="o">=</span> <span class="s">"ks"</span><span class="o">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"address"</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">street</span><span class="o">;</span>
    <span class="nd">@Field</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"zip_code"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">zipCode</span><span class="o">;</span>
    <span class="c1">// ... constructors / getters / setters</span>
<span class="o">}</span>
</code></pre>
<p><code>@UDT</code> takes the following options:</p>

<ul>
<li>
<code>keyspace</code>: the keyspace for the UDT.</li>
<li>
<code>name</code>: the name of the UDT in the database.</li>
<li>
<code>caseSensitiveKeyspace</code>: whether the keyspace name is case-sensitive.</li>
<li>
<code>caseSensitiveType</code>: whether the UDT name is case-sensitive.</li>
</ul>

<p>The class must provide a default constructor, and all fields (except the
ones annotated <code>@Transient</code>) must have corresponding setters and
getters.</p>

<p>As in table entities, fields are mapped to an UDT field of the same
name by default. To declare a different name or use case-sensitivity,
use the <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Field.html">@Field</a> annotation:</p>
<pre class="highlight"><code><span class="nd">@Field</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"zip_code"</span><span class="o">)</span>
<span class="kd">private</span> <span class="kt">int</span> <span class="n">zipCode</span><span class="o">;</span>
</code></pre>
<p>When a table has a UDT column, the mapper will automatically map it to
the corresponding class:</p>
<pre><code>CREATE TABLE company (company_id uuid PRIMARY KEY, name text, address address);
</code></pre>
<pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Company</span> <span class="o">{</span>
    <span class="nd">@PartitionKey</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"company_id"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">UUID</span> <span class="n">companyId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
<p>(this also works with UDTs inside collections or other UDTs, with
arbitrary level of nesting)</p>

<h3 id="mapping-collections">Mapping collections<a class="anchor" href="#mapping-collections" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h3>

<p>Java collections will be automatically mapped into corresponding
Cassandra types. As in Cassandra, collections can contain all native
types and all <a href="#mapping-user-types">user types</a> previously defined is
the database.</p>

<p>Collection fields must be annotated to indicate whether they are frozen
or not (currently this is only for informational purposes, but the
mapper will check that the declared state match the rules in Cassandra).
The default annotation is <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/Frozen.html">@Frozen</a>, <a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/FrozenKey.html">@FrozenKey</a> and
<a href="http://docs.datastax.com/en/drivers/java/2.1/com/datastax/driver/mapping/annotations/FrozenValue.html">@FrozenValue</a>` are also provided for convenience:</p>
<pre class="highlight"><code><span class="c1">// Will be mapped as a 'list&lt;text&gt;'</span>
<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stringList</span><span class="o">;</span>

<span class="c1">// Will be mapped as a 'frozen&lt;list&lt;text&gt;&gt;'</span>
<span class="nd">@Frozen</span>
<span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">frozenStringList</span><span class="o">;</span>

<span class="c1">// Will be mapped as 'map&lt;frozen&lt;address&gt;, frozen&lt;list&lt;text&gt;&gt;&gt;'</span>
<span class="nd">@FrozenKey</span>
<span class="nd">@FrozenValue</span>
<span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Address</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">frozenKeyValueMap</span><span class="o">;</span>

<span class="c1">// Will be mapped as 'map&lt;text, frozen&lt;list&lt;address&gt;&gt;&gt;'</span>
<span class="nd">@FrozenValue</span>
<span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Address</span><span class="o">&gt;&gt;</span> <span class="n">frozenValueMap</span><span class="o">;</span>
</code></pre>


        </div>
        <div class="col-md-3">
          <div id="navigation" class="panel-group side-nav" data-spy="affix" data-offset-top="60" data-offset-bottom="80" role="tablist" aria-multiselectable="true">
            <div id="table-of-contents-panel" class="panel panel-default">
              <div id="table-of-contents-heading" class="panel-heading" role="tab">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="#table-of-contents" aria-expanded="true" aria-controls="table-of-contents">
                    Contents<i class="pull-right glyphicon glyphicon-chevron-up"></i>
                  </a>
                </h4>
              </div>
              <div id="table-of-contents" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="table-of-contents-heading">
                <div class="panel-body">
                  <ol class="nav nav-pills nav-stacked toc"><li>
<a href="#definition-of-mapped-classes">Definition of mapped classes
</a><ol class="nav nav-pills nav-stacked">
<li>
<a href="#creating-a-table-entity">Creating a table entity
</a><ol class="nav nav-pills nav-stacked">
<li><a href="#column-names">Column names
</a></li>
<li><a href="#primary-key-fields">Primary key fields
</a></li>
<li><a href="#enumerations">Enumerations
</a></li>
<li><a href="#computed-fields">Computed fields
</a></li>
<li><a href="#transient-fields">Transient fields
</a></li>
</ol>
</li>
<li><a href="#mapping-user-types">Mapping User Types
</a></li>
<li><a href="#mapping-collections">Mapping collections
</a></li>
</ol>
</li></ol>
                </div>
              </div>
            </div>

            
          </div>
        </div>
      </div>
    </div>

    
    <footer class="container text-muted">
      <ul class="list-inline">
      
        
        <li>
          <a href="https://github.com/datastax/java-driver/">Code</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="http://datastax.github.io/java-driver/">Docs</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://datastax-oss.atlassian.net/browse/JAVA/">Issues</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://groups.google.com/a/lists.datastax.com/forum/#!forum/java-driver-user">Mailing List</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="irc://irc.freenode.net/datastax-drivers">IRC Channel</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://github.com/datastax/java-driver/releases">Releases</a>
        </li>
      
      </ul>
    </footer>
    

    <script src="../../../../js/jquery.js"></script>
    <script src="../../../../js/bootstrap.js"></script>
    <script src="../../../../js/angular.js"></script>
    <script src="../../../../js/mousetrap.js"></script>
    <script src="../../../../js/hotkeys.js"></script>
    <script src="../../../../js/ZeroClipboard.js"></script>
    <script src="../../../../js/lunr.js"></script>
    <script src="../../../../js/app.js"></script>
  </body>
</html>
