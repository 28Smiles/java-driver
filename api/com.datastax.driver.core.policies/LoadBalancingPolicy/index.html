<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="High performance Java client for Apache Cassandra">
    <meta name="author" content="DataStax">

    <title>Java Driver for Apache Cassandra - LoadBalancingPolicy</title>

    <link rel="icon" href="../../../favicon.ico">
    <link rel="apple-touch-icon" href="../../../favicon.png">
    <link href="../../../css/style.css" rel="stylesheet">
    <link href="../../../css/pygments.css" rel="stylesheet">
    <link href="../../../css/hotkeys.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="docs" data-spy="scroll" data-target=".side-nav">
    <header class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../../">Java Driver for Apache Cassandra</a>
        </div>
        <div class="collapse navbar-collapse" ng-controller="search">
          <ul class="nav navbar-nav">
            
            <li>
              <a href="../../../">Introduction</a>
            </li>
            
            <li>
              <a href="../../../features/">Features</a>
            </li>
            
            <li class="active">
              <a href="../../">API docs</a>
            </li>
            
          </ul>
          <form class="navbar-form form-search navbar-right dropdown visible-lg-block" ng-class="{open: hasResults}" role="search" ng-submit="submit()">
            <div class="form-group has-feedback">
              <input type="search" class="form-control input-sm mousetrap" placeholder="Search..." ng-model="q" ng-change="search('2.0.10')" ng-disabled="!searchReady" disabled data-hotkey="{down: moveDown, up: moveUp, esc: reset}" data-search>
            </div>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="result in results" ng-class="{'bg-warning': $index == current}"><a ng-href="{{basePath}}{{result.path}}"><span ng-bind-html="summary(result)"></span></a></li>
            </ul>
          </form>
        </div>
      </div>
    </header>

    <div class="container" id="content">
      <div class="row">
        <div class="col-md-9 content">
          <nav class="crumbs">
            <ol class="breadcrumb">
              
              <li>
                <div class="dropdown">
                  <button id="current-version" class="btn btn-default btn-sm" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    2.0.10
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="current-version">
                  
                    <li class="disabled"><a href="./">2.0.10</a></li>
                  
                    <li><a href="../../../2.1.5/api/com.datastax.driver.core.policies/LoadBalancingPolicy/">2.1.5</a></li>
                  
                  </ul>
                </div>
              </li>
              
              
              
              
              <li><a href="../../../">Introduction</a></li>
              
              
              
              
              
              <li><a href="../../">API docs</a></li>
              
              
              
              
              
              <li><a href="../">com.datastax.driver.core.policies</a></li>
              
              
              
              
              
              <li class="active">LoadBalancingPolicy</li>
              
              
              
            </ol>
          </nav>
          

<div class="page-header">
  <h1 id="interface-loadbalancingpolicy">
    <small>interface</small>
    <abbr title="com.datastax.driver.core.policies.LoadBalancingPolicy">LoadBalancingPolicy</abbr>
  <a class="anchor" href="#interface-loadbalancingpolicy" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h1>
</div>

<p>The policy that decides which Cassandra hosts to contact for each new query. </p>
<p> Two methods need to be implemented: </p>
<ul> <li>
<code><a href="#distance%28Host%29">LoadBalancingPolicy#distance</a></code>: returns the “distance” of an host for that balancing policy. </li> <li>
<code><a href="#newQueryPlan%28String%2C+Statement%29">LoadBalancingPolicy#newQueryPlan</a></code>: it is used for each query to find which host to query first, and which hosts to use as failover.</li> </ul> <p> The <code>LoadBalancingPolicy</code> is a <code><a href="../../com.datastax.driver.core/Host.StateListener/">Host.StateListener</a></code> and is thus informed of hosts up/down events. For efficiency purposes, the policy is expected to exclude down hosts from query plans.</p>

<h2 id="extends">Extends<a class="anchor" href="#extends" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>
<div class="interface-parents">
  <ul class="list-inline">
  
    <li><code><a href="../../com.datastax.driver.core/Host.StateListener/">StateListener</a></code></li>
  
  </ul>
</div>

<h2 id="extended-by">Extended By<a class="anchor" href="#extended-by" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>
<div class="interface-children">
  <ul class="list-inline">
  
    <li><code><a href="../ChainableLoadBalancingPolicy/">ChainableLoadBalancingPolicy</a></code></li>
  
    <li><code><a href="../CloseableLoadBalancingPolicy/">CloseableLoadBalancingPolicy</a></code></li>
  
  </ul>
</div>

<h2 id="implemented-by">Implemented By<a class="anchor" href="#implemented-by" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>
<div class="interface-implementations">
  <ul class="list-inline">
  
    <li><code><a href="../DCAwareRoundRobinPolicy/">DCAwareRoundRobinPolicy</a></code></li>
  
    <li><code><a href="../LatencyAwarePolicy/">LatencyAwarePolicy</a></code></li>
  
    <li><code><a href="../RoundRobinPolicy/">RoundRobinPolicy</a></code></li>
  
    <li><code><a href="../TokenAwarePolicy/">TokenAwarePolicy</a></code></li>
  
    <li><code><a href="../WhiteListPolicy/">WhiteListPolicy</a></code></li>
  
  </ul>
</div>

<h2 id="methods">Methods<a class="anchor" href="#methods" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
</h2>
<div class="class-methods">
  
  <div class="panel panel-default member-definition" id="init%28Cluster%2C+Collection%3CHost%3E%29">
    <div class="panel-heading method-heading">
      <a class="anchor" href="#init%28Cluster%2C+Collection%3CHost%3E%29" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
      <code>void</code> init <big>(</big><code><a href="../../com.datastax.driver.core/Cluster/">Cluster</a></code> cluster, <code><abbr title="java.util.Collection">Collection</abbr></code>&lt;<code><a href="../../com.datastax.driver.core/Host/">Host</a></code>&gt; hosts<big>)</big>
    </div>
    <div class="panel-body method-body">
      <p>Initialize this load balancing policy. </p>
<p> Note that the driver guarantees that it will call this method exactly once per policy object and will do so before any call to another of the methods of the policy.</p>

      <dl class="tags">
<dt class="tag-title">Parameters:</dt>
<dd class="tag-content"><table class="table table-striped param">
<thead><tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody>
<tr>
<td><var>cluster</var></td>
<td><code><a href="../../com.datastax.driver.core/Cluster/">Cluster</a></code></td>
<td>
<p>the <code>Cluster</code> instance for which the policy is created.</p>
</td>
</tr>
<tr>
<td><var>hosts</var></td>
<td>
<code><abbr title="java.util.Collection">Collection</abbr></code>&lt;<code><a href="../../com.datastax.driver.core/Host/">Host</a></code>&gt;</td>
<td>
<p>the initial hosts to use.</p>
</td>
</tr>
</tbody>
</table></dd>
<dt class="tag-title">Returns:</dt>
<dd class="tag-content"><table class="table table-striped return">
<thead><tr>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody><tr>
<td><code>void</code></td>
<td></td>
</tr></tbody>
</table></dd>
</dl>
    </div>
  </div>
  
  <div class="panel panel-default member-definition" id="distance%28Host%29">
    <div class="panel-heading method-heading">
      <a class="anchor" href="#distance%28Host%29" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
      <code><a href="../../com.datastax.driver.core/HostDistance/">HostDistance</a></code> distance <big>(</big><code><a href="../../com.datastax.driver.core/Host/">Host</a></code> host<big>)</big>
    </div>
    <div class="panel-body method-body">
      <p>Returns the distance assigned by this policy to the provided host. </p>
<p> The distance of an host influence how much connections are kept to the node (see <code><a href="../../com.datastax.driver.core/HostDistance/">HostDistance</a></code>). A policy should assign a <code>LOCAL</code> distance to nodes that are susceptible to be returned first by <code>newQueryPlan</code> and it is useless for <code>newQueryPlan</code> to return hosts to which it assigns an <code>IGNORED</code> distance. </p>
<p> The host distance is primarily used to prevent keeping too many connections to host in remote datacenters when the policy itself always picks host in the local datacenter first.</p>

      <dl class="tags">
<dt class="tag-title">Parameters:</dt>
<dd class="tag-content"><table class="table table-striped param">
<thead><tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody><tr>
<td><var>host</var></td>
<td><code><a href="../../com.datastax.driver.core/Host/">Host</a></code></td>
<td>
<p>the host of which to return the distance of.</p>
</td>
</tr></tbody>
</table></dd>
<dt class="tag-title">Returns:</dt>
<dd class="tag-content"><table class="table table-striped return">
<thead><tr>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody><tr>
<td><code><a href="../../com.datastax.driver.core/HostDistance/">HostDistance</a></code></td>
<td>
<p>the HostDistance to <code>host</code>.</p>
</td>
</tr></tbody>
</table></dd>
</dl>
    </div>
  </div>
  
  <div class="panel panel-default member-definition" id="newQueryPlan%28String%2C+Statement%29">
    <div class="panel-heading method-heading">
      <a class="anchor" href="#newQueryPlan%28String%2C+Statement%29" aria-hidden="true"><span class="glyphicon glyphicon-link"></span></a>
      <code><abbr title="java.util.Iterator">Iterator</abbr></code>&lt;<code><a href="../../com.datastax.driver.core/Host/">Host</a></code>&gt; newQueryPlan <big>(</big><code><abbr title="java.lang.String">String</abbr></code> loggedKeyspace, <code><a href="../../com.datastax.driver.core/Statement/">Statement</a></code> statement<big>)</big>
    </div>
    <div class="panel-body method-body">
      <p>Returns the hosts to use for a new query. </p>
<p> Each new query will call this method. The first host in the result will then be used to perform the query. In the event of a connection problem (the queried host is down or appear to be so), the next host will be used. If all hosts of the returned <code>Iterator</code> are down, the query will fail.</p>

      <dl class="tags">
<dt class="tag-title">Parameters:</dt>
<dd class="tag-content"><table class="table table-striped param">
<thead><tr>
<th class="name">Name</th>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody>
<tr>
<td><var>loggedKeyspace</var></td>
<td><code><abbr title="java.lang.String">String</abbr></code></td>
<td>
<p>the currently logged keyspace (the one set through either <code><a href="../../com.datastax.driver.core/Cluster/#connect%28String%29">Cluster#connect(String)</a></code> or by manually doing a <code>USE</code> query) for the session on which this plan need to be built. This can be <code>null</code> if the corresponding session has no keyspace logged in.</p>
</td>
</tr>
<tr>
<td><var>statement</var></td>
<td><code><a href="../../com.datastax.driver.core/Statement/">Statement</a></code></td>
<td>
<p>the query for which to build a plan.</p>
</td>
</tr>
</tbody>
</table></dd>
<dt class="tag-title">Returns:</dt>
<dd class="tag-content"><table class="table table-striped return">
<thead><tr>
<th class="type">Type</th>
<th class="details">Details</th>
</tr></thead>
<tbody><tr>
<td>
<code><abbr title="java.util.Iterator">Iterator</abbr></code>&lt;<code><a href="../../com.datastax.driver.core/Host/">Host</a></code>&gt;</td>
<td>
<p>an iterator of Host. The query is tried against the hosts returned by this iterator in order, until the query has been sent successfully to one of the host.</p>
</td>
</tr></tbody>
</table></dd>
</dl>
    </div>
  </div>
  
</div>


        </div>
        <div class="col-md-3">
          <div id="navigation" class="panel-group side-nav" data-spy="affix" data-offset-top="60" data-offset-bottom="54" role="tablist" aria-multiselectable="true">
            <div id="table-of-contents-panel" class="panel panel-default">
              <div id="table-of-contents-heading" class="panel-heading" role="tab">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="#table-of-contents" aria-expanded="true" aria-controls="table-of-contents">
                    Contents<i class="pull-right glyphicon glyphicon-chevron-up"></i>
                  </a>
                </h4>
              </div>
              <div id="table-of-contents" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="table-of-contents-heading">
                <div class="panel-body">
                  <ol class="nav nav-pills nav-stacked toc">
<li><a href="#extends">Extends
</a></li>
<li><a href="#extended-by">Extended By
</a></li>
<li><a href="#implemented-by">Implemented By
</a></li>
<li><a href="#methods">Methods
</a></li>
</ol>
                </div>
              </div>
            </div>

            
          </div>
        </div>
      </div>
    </div>

    
    <footer class="container text-muted">
      <ul class="list-inline">
      
        
        <li>
          <a href="https://github.com/datastax/java-driver/">Code</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="http://datastax.github.io/java-driver/">Docs</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://datastax-oss.atlassian.net/browse/JAVA/">Issues</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://groups.google.com/a/lists.datastax.com/forum/#!forum/java-driver-user">Mailing List</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="irc://irc.freenode.net/datastax-drivers">IRC Channel</a>
        </li>
      
        <li>·</li>
        <li>
          <a href="https://github.com/datastax/java-driver/releases">Releases</a>
        </li>
      
      </ul>
    </footer>
    

    <script src="../../../js/jquery.js"></script>
    <script src="../../../js/bootstrap.js"></script>
    <script src="../../../js/angular.js"></script>
    <script src="../../../js/mousetrap.js"></script>
    <script src="../../../js/hotkeys.js"></script>
    <script src="../../../js/ZeroClipboard.js"></script>
    <script src="../../../js/lunr.js"></script>
    <script src="../../../js/app.js"></script>
  </body>
</html>
